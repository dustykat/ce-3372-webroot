#!/usr/bin/env python
# coding: utf-8

# # Lesson 7. Storage Systems
# 
# Storage is used in water supply, storm water management, and wastewater systems for several reasons. 
# 
# ## Scale
# 
# There are several scales of storage: 
# - large (water supply reservoirs, like Lake Allen Henry)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/LakeAlanHenry.png" width="600">
# <!--<img src="LakeAlanHenry.png" width="600">-->
# </figure>
# - moderate (Southwest Lubbock Water Treatment)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/LBB-SDWPlant.png" width="500"><!--<img src="LBB-SDWPlant.png" width="500">-->
# </figure>
# - localized (storage tanks)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/WaterTower.png" width="400">
#     <!--<img src="WaterTower.png" width="400">-->
# </figure>
# 
# The large scale systems are sized using water resources management principles, which are discussed to some extent in Gupta pp. 545-548.  The usual tool is called a ripple-chart or double mass curve (same thing, different names).  In local scale an identical tool is used, but at a much different (hourly) time-scale.
#     

# ---
# 
# ## Local Scale
# 
# The remainder of this chapter will focus on the local scale systems.  At the local scale (Gupta pp. 548-553) we are concerned with three categories of storage:
#     
# **SERVICE STORAGE**  
# 1. Flow equalization — generally things are designed for a particular steady flow rate and storage can be used to accommodate variable flow rates in a system. 
# 2. Pressure zone maintenance 
# 
# **EMERGENCY STORAGE**  
# 1. used to provide supply during repairs and other system interrupts (except fire suppression)
# 
# **FIRE STORAGE**  
# 1. used to provide supply during fire fighting activities – considered seperately from emergency storage

# ## Storage Systems (Types)
# 
# - Surface Reservoirs
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/surf-res.png" width="400">
# </figure>
# 
# - Standpipes
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/standpipe.png" width="400">
# </figure>
# 
# - Elevated Tanks
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/elev-tank.png" width="400">
# </figure>
# 
# - Hydropillar (1/2)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/hydro-pillar.png" width="400">
# </figure>
# 
# - Hydropillar (2/2)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/hydropillar-2.png" width="400">
# </figure>
# 
# - Spheroid Tanks
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/spheroid.png" width="400">
# </figure>
# 
# - Standpipes (Ground Level)
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/standpipe-ground.png" width="400">
# </figure>
# 
# - Standpipes/Reservoirs
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/standpipes-and-reservoirs.png" width="400">
# </figure>
# 
# - Freshmix
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/freshmix.png" width="400">
# </figure>
# 
# - Composite Elevated
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/composite-elevated.png" width="400">
# </figure>

# ## Typical RFP and Installation
# 
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/typical-install.png" width="400">
# </figure>

# ### Underground Installations
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/underground.png" width="400">
# </figure>

# ## Purposes
# 
# ### Equalizing or Operating Storage
# - Equalize pumping rate into reservoirs
# - Provide storage for peak demand times
# - Provide system pressure without booster pumping
# 
# ### Fire and Emergency
# - Pressure maintenance
# - Supply during shutdowns for repairs

# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/stor-compartments.png" width="400">
# </figure>
# 
# ### Flow-Equalization
# Flow-equalization storage is sufficient storage to account for peak
# demands in the system without having to exceed supply capacity. A desirable volume is 1-2 days of average daily demand. (cite)
# 
# ### Emergency 
# 
# Emergency storage to allow the system to operate without external supply
# sources for a period of time to allow for repairs or other unusual
# circumstances. Without emergency storage, every upset will lead to a ”boil-water” order or
# substantial interruption of service — these kinds of interruptions should be rare if the
# system is well engineered. A desirable volume is 1-2 days of average daily demand. (cite)
# 
# ### Fire Storage
# Fire storage is sufficient storage to allow the system to meet routine
# uses plus substantial fire flow. The desirable volume is based on expected fire flow rates multiplied by the required fire flow duration.  In most cases it is implicitly stipulated in design guidance documents (e.g. San Marcos manual) by vurtue of required hydrant flow rates.
# 
# ### How Much?
# Engineering would tend to choose for the larger volumes; Economics will argue for the smaller volumes. The engineer will have to balance these competing choices in a
# design.   Additionally, residence times in any storage reservoir for **TREATED** water should not exceed a reasonable amount disinfection residual contact time.
# 
# - For chlorine/chloramine disinfection time is on the order of 6-10 days
# - Hydraulic retention time of any such reservoir should be no longer than 8 days (as a reasonable rule of thumb).
# 
# **Hydraulic retention time (HRT)** is the ratio of storage volume to
# average discharge through the reservoir;
# 
# $$ HRT = \frac{V_{tank}}{Q_{avg. daily}} $$

# ## OPERATING STORAGE
# 
# - Determine hourly demand for design day
# - Calculate cumulative draft
# - Plot cumulative draft vs. time (24 hr)
# - Draw diagonal line representing constant pumping
# - Read required storage as sum of two maximum ordinates

# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/mass-flow-diagram-one.png" width="400">
# </figure>

# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/mass-flow-12hour.png" width="400">
# </figure>

# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/MF-spreadsheet-1.png" width="400">
# </figure>
# 
# <figure>
# <img src="http://54.243.252.9/ce-3372-webroot/ce3372-jb/ce3372jb/lessons/lesson07/MF-spreadsheet-2.png" width="400">
# </figure>

# ## References
# 1. Gupta, R. S. 2017. Hydrology and Hydraulic Systems. Waveland Press, Inc. pp. 545-553
# 
# 2. Roberson, J.A., Cassidy, J.J., and Chaudry, M.H. (1988) Closed Conduits in "Hydraulic Engineering." 
# Houghton Mifflin Co. pp. 240-310 [http://54.243.252.9/ce-3372-webroot/3-Readings/Chapter5/](http://54.243.252.9/ce-3372-webroot/3-Readings/Chapter5/)
# 
# 
# 3. Chin, D. (2006). pp. 10-26 in "Water Resources Engineering, 2 ed." Prentice Hall, Inc. [http://54.243.252.9/ce-3372-webroot/3-Readings/Chin_10-26/](http://54.243.252.9/ce-3372-webroot/3-Readings/Chin_10-26/)
# 
# 
# 4. Notes on Hydraulics  Work in progress -- largely replicates content in "Closed Conduit Flow" with some extensions
# [http://54.243.252.9/ce-3372-webroot/3-Readings/HydraulicsNotes/](http://54.243.252.9/ce-3372-webroot/3-Readings/HydraulicsNotes/)
# 
# 5. "Water Distribution Systems" in Land Development Handbook, Ed. S.O. Dewberry, Dewberry Inc., McGraw-Hill
# [http://54.243.252.9/ce-3372-webroot/3-Readings/WaterDistributionSystems/](http://54.243.252.9/ce-3372-webroot/3-Readings/WaterDistributionSystems/)

# In[ ]:




